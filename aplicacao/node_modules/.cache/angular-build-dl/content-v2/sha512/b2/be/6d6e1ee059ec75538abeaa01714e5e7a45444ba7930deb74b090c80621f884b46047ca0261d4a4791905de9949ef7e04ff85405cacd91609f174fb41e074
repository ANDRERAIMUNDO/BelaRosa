{"version":3,"sources":["webpack:///src/app/sigup/sigup-routing.module.ts","webpack:///src/app/sigup/sigup.module.ts","webpack:///src/app/sigup/sigup.page.ts","webpack:///src/app/sigup/sigup.page.scss","webpack:///src/app/sigup/sigup.page.html"],"names":["routes","path","component","SigupPage","SigupPageRoutingModule","NgModule","imports","RouterModule","exports","SigupPageModule","CommonModule","FormsModule","IonicModule","ReactiveFormsModule","declarations","clienteService","registroService","storageService","router","formBuilder","alertController","localUser","getLocalUser","email","findByEmail","subscribe","response","registro","catchError","status","navigate","formGroup","group","registroId","name","Validators","cpf","dateNasc","phone","cep","logradouro","numero","complemento","bairro","localidade","uf","id","get","value","viaCep","endereco","res","setValue","insert","registrationSuccess","create","cssClass","header","subHeader","message","buttons","text","handler","alert","present","ClienteService","RegistroService","StorageService","Router","FormBuilder","AlertController","Component","selector","template"],"mappings":"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","file":"src_app_sigup_sigup_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SigupPage } from './sigup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SigupPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SigupPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SigupPageRoutingModule } from './sigup-routing.module';\n\nimport { SigupPage } from './sigup.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    SigupPageRoutingModule\n  ],\n  declarations: [SigupPage]\n})\nexport class SigupPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { ClienteDTO } from '../models/cliente.dto';\nimport { Endereco } from '../models/endereco';\nimport { RegistroDTO } from '../models/registro.dto';\nimport { ClienteService } from '../services/cliente.service';\nimport { RegistroService } from '../services/registro.service';\nimport { StorageService } from '../services/storage.service';\n\n@Component({\n  selector: 'app-sigup',\n  templateUrl: './sigup.page.html',\n  styleUrls: ['./sigup.page.scss'],\n})\nexport class SigupPage implements OnInit {\n  formGroup: FormGroup;\n  registro: RegistroDTO;\n  cliente: ClienteDTO;\n  endereco: Endereco;\n  cep: string;\n  _registroId: RegistroDTO;\n  constructor(public clienteService: ClienteService,\n    public registroService: RegistroService,\n    public storageService: StorageService,\n    public router: Router,\n    public formBuilder: FormBuilder,\n    public alertController: AlertController) { }\n    \n  ngOnInit() {\n    let localUser = this.storageService.getLocalUser();\n    if (localUser && localUser.email)\n    {\n      this.registroService.findByEmail(localUser.email)\n      .subscribe(response=>\n        {\n          this.registro = response as RegistroDTO;\n        }, catchError =>\n            {\n              if (catchError.status == 403)\n                {\n                  this.router.navigate(['/sigup']);\n                } \n            }\n        );\n    }\n  \n    this.formGroup =  this.formBuilder.group(\n      {\n        registroId : [''],\n        name: ['', [Validators.required]],\n        cpf: ['', [Validators.required]],\n        dateNasc: ['', [Validators.required]],\n        phone: ['', [Validators.required]],\n        cep: ['', [Validators.required]],\n        logradouro: ['',[Validators.required]],  \n        numero: ['', [Validators.required]],\n        complemento: ['', [Validators.required]],\n        bairro: ['', [Validators.required]],\n        localidade:['', [Validators.required]],\n        uf: ['', [Validators.required]],\n      });\n  }\n\n  getEndereco(id){\n    let cep = this.formGroup.get('cep').value;\n    this.clienteService.viaCep(cep)\n    .subscribe(response=>\n      {\n        this.endereco = response;\n      },\n      catchError=>\n        {\n          if (catchError.status == 400)\n          {\n            this.router.navigate(['/sigup']);\n          }\n        }\n      );\n      let localUser = this.storageService.getLocalUser();\n      this.registroService.findByEmail(localUser.email).subscribe(res=> {this.registro = res as RegistroDTO});\n      id = this.registro.id;\n      this.formGroup.get('registroId').setValue(id);\n  }\n\n  submitForm(){\n    this.clienteService.insert(this.formGroup.value)\n    .subscribe(response =>\n      {\n        this.registrationSuccess();\n      }, catchError=>\n      {\n        this.router.navigate(['/sigup']);\n      });\n  }\n\n async registrationSuccess () {\n    const alert = await this.alertController.create(\n      {\n        cssClass: 'registration-success',\n        header: 'Ok',\n        subHeader: 'Tudo certo!',\n        message: 'Agora finalizamos seu cadastro.',\n        buttons: [\n          {\n            text :'Clique aqui',\n            cssClass: 'secondary',\n            handler: () =>\n            {\n              this.router.navigate(['/dashboard/index']);\n            }\n          }\n        ]\n      }\n    )\n    await alert.present();\n  }\n\n}\n","export default \"#container {\\n  text-align: center;\\n  position: relative;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\nion-header {\\n  font-family: \\\"Lucida Sans Regular\\\";\\n  font-size: x-small;\\n  color: #080808;\\n  text-align: length;\\n  --ion-background-color: rgb(240, 191, 233);\\n}\\n\\n.content {\\n  --ion-background-color: rgb(252, 239, 250);\\n}\\n\\nh6 {\\n  font-family: \\\"Lucida Sans Regular\\\";\\n  font-size: small;\\n  text-align: center;\\n  color: #0f0f0f;\\n}\\n\\nion-icon {\\n  width: 20px;\\n  height: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ3VwLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0Qsa0JBQUE7RUFDQyxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQUNKOztBQUVFO0VBQ0Usa0NBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLDBDQUFBO0FBQ0o7O0FBQ0U7RUFDSSwwQ0FBQTtBQUVOOztBQUNFO0VBQ0Usa0NBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtBQUVKOztBQUNFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7QUFFSiIsImZpbGUiOiJzaWd1cC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICB0b3A6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gIH1cbiAgXG4gIGlvbi1oZWFkZXIge1xuICAgIGZvbnQtZmFtaWx5OidMdWNpZGEgU2FucyBSZWd1bGFyJztcbiAgICBmb250LXNpemU6IHgtc21hbGw7XG4gICAgY29sb3I6IHJnYig4LCA4LCA4KTtcbiAgICB0ZXh0LWFsaWduOiBsZW5ndGg7IFxuICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6IHJnYigyNDAsIDE5MSwgMjMzKTtcbiAgfVxuICAuY29udGVudCB7ICBcbiAgICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6IHJnYigyNTIsIDIzOSwgMjUwKTtcbiAgfSBcbiAgXG4gIGg2IHtcbiAgICBmb250LWZhbWlseTonTHVjaWRhIFNhbnMgUmVndWxhcic7XG4gICAgZm9udC1zaXplOiBzbWFsbDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IFxuICAgIGNvbG9yOiByZ2IoMTUsIDE1LCAxNSk7XG4gIH1cbiAgXG4gIGlvbi1pY29uIHtcbiAgICB3aWR0aDogMjBweDsgXG4gICAgaGVpZ2h0OiAyMHB4O1xuICB9XG4gICJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <h5>Finalize seu cadastro</h5>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"content\\\" [fullscreen]=\\\"true\\\">\\n  <div id=\\\"container\\\">\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\n      <ion-input type=\\\"text\\\" disabled>{{registro?.email}}</ion-input>\\n    </ion-item>\\n\\n  <form [formGroup]=\\\"formGroup\\\" (ngSubmit)=\\\"submitForm()\\\">\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Nome completo</ion-label>\\n      <ion-input formControlName=\\\"name\\\" type=\\\"text\\\" required></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.name.dirty && formGroup.controls.name.errors\\\" margin-left>Obrigatório. </p>\\n    \\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">CPF</ion-label>\\n      <ion-input formControlName=\\\"cpf\\\" type=\\\"text\\\" required></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.cpf.dirty && formGroup.controls.cpf.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Data de Nascimento</ion-label>\\n      <ion-input formControlName=\\\"dateNasc\\\" type=\\\"text\\\" required></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.dateNasc.dirty && formGroup.controls.dateNasc.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Celular</ion-label>\\n      <ion-input formControlName=\\\"phone\\\" type=\\\"text\\\" required></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.phone.dirty && formGroup.controls.phone.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Cep</ion-label>\\n      <ion-input  formControlName=\\\"cep\\\" type=\\\"text\\\" required ></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.cep.dirty && formGroup.controls.cep.errors\\\" margin-left>Obrigatório. </p>\\n    <ion-button (click)=\\\"getEndereco()\\\">buscar</ion-button>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Endereço</ion-label>\\n      <ion-input formControlName=\\\"logradouro\\\" type=\\\"text\\\" value='{{endereco?.logradouro}}' required> </ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.logradouro.dirty && formGroup.controls.logradouro.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Numero</ion-label>\\n      <ion-input formControlName=\\\"numero\\\" type=\\\"text\\\" required></ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.numero.dirty && formGroup.controls.numero.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Complemento</ion-label>\\n      <ion-input formControlName=\\\"complemento\\\" type=\\\"text\\\" value='{{endereco?.complemento}}' required> </ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.complemento.dirty && formGroup.controls.complemento.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Bairro</ion-label>\\n      <ion-input formControlName=\\\"bairro\\\" type=\\\"text\\\" value='{{endereco?.bairro}}' required> </ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.bairro.dirty && formGroup.controls.bairro.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Cidade</ion-label>\\n      <ion-input formControlName=\\\"localidade\\\" type=\\\"text\\\" value='{{endereco?.localidade}}' required> </ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.localidade.dirty && formGroup.controls.localidade.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Estado</ion-label>\\n      <ion-input formControlName=\\\"uf\\\" type=\\\"text\\\" value='{{endereco?.uf}}' required> </ion-input>\\n    </ion-item>\\n    <p *ngIf=\\\"formGroup.controls.uf.dirty && formGroup.controls.uf.errors\\\" margin-left>Obrigatório. </p>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-button type=\\\"submit\\\" color=\\\"light\\\" expand=\\\"block\\\">Cadastrar</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </form>\\n  </div>\\n</ion-content>\\n\";"]}